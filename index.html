<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kejutan Ulang Tahun untuk bubub aku </title>
<style>
  :root{
    --accent:#ff5876;
    --accent2:#ffb86b;
    --bg1:#ffdbe6;
    --bg2:#fff5e6;
    --text:#2b2130;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    background: linear-gradient(135deg,var(--bg1),var(--bg2));
    min-height:100vh; color:var(--text); display:flex; align-items:center; justify-content:center; padding:18px;
  }
  .card{
    width:100%; max-width:920px; border-radius:14px; padding:20px; position:relative;
    background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));
    box-shadow:0 14px 40px rgba(7,16,36,0.08); overflow:hidden;
  }
  .float-layer{ position:absolute; inset:0; pointer-events:none; overflow:hidden; z-index:1; }
  .float{ position:absolute; font-size:18px; opacity:0.95; transform-origin:center; animation: floatUp linear forwards; }
  @keyframes floatUp { to{ transform: translateY(-130vh) rotate(360deg); opacity:0; } }

  .top{ display:flex; gap:18px; align-items:center; z-index:2; position:relative; }
  .left{ flex:1 }
  h1{ margin:0; font-size:28px; color:#2e1b2f }
  p.lead{ margin:8px 0 14px 0; color:#5b4656 }

  .hero-photo{ width:140px; height:140px; border-radius:12px; overflow:hidden; flex-shrink:0; box-shadow:0 8px 26px rgba(0,0,0,0.12); }
  .hero-photo img{ width:100%; height:100%; object-fit:cover; display:block }

  .typing-box{
    margin-top:14px; background:rgba(255,255,255,0.9); border-radius:10px; padding:14px; min-height:120px;
    box-shadow:0 8px 18px rgba(0,0,0,0.06); color:var(--text); font-size:15px; line-height:1.6;
  }
  .cursor{ display:inline-block; width:10px; background:var(--accent); margin-left:6px; animation: blink .9s steps(1) infinite; vertical-align:middle; height:14px; border-radius:2px; }
  @keyframes blink{ 50% { opacity:0 } }

  .controls{ display:flex; gap:12px; align-items:center; margin-top:14px; z-index:2; position:relative; flex-wrap:wrap }
  .btn{
    background: linear-gradient(90deg,var(--accent),var(--accent2));
    color:white; border:0; padding:12px 18px; border-radius:12px; font-weight:700; cursor:pointer;
    box-shadow:0 8px 20px rgba(255,88,118,0.12); transition:transform .16s;
  }
  .btn.pulse{ animation: pulse 1.6s infinite; }
  @keyframes pulse{ 0%{transform:scale(1)} 50%{transform:scale(1.03)} 100%{transform:scale(1)} }
  .mutebtn{ background:transparent; border:1px solid rgba(0,0,0,0.06); padding:10px 12px; border-radius:10px; color:var(--text) }

  /* Surprise (hidden initially) */
  #surprise{ display:none; margin-top:18px; padding:18px; border-radius:12px; background: linear-gradient(180deg, rgba(0,0,0,0.72), rgba(0,0,0,0.48)); color:white; z-index:2 }
  .gallery{ display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-top:12px }
  .item{ width:calc(50% - 12px); max-width:260px; height:180px; border-radius:12px; overflow:hidden;
         display:flex; align-items:center; justify-content:center; opacity:0; transform:scale(.92); transition:all .6s; box-shadow:0 8px 30px rgba(0,0,0,0.35); }
  .item.show{ opacity:1; transform:scale(1) }
  .item img{ width:100%; height:100%; object-fit:cover; display:block }

  .wa-wrap{ display:none; margin-top:16px }
  .wa-wrap input, .wa-wrap textarea { width:100%; padding:10px; border-radius:8px; border:0; margin-bottom:8px; font-size:14px }

  .wa-send{ background:#25D366; color:white; border:0; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer }

  .note{ margin-top:10px; font-size:13px; color:rgba(0,0,0,0.45) }

  @media (max-width:640px){
    .item{ width:calc(50% - 8px); height:140px }
    h1{ font-size:20px }
    .hero-photo{ width:110px; height:110px }
  }
</style>
</head>
<body>

<div class="card" id="card">
  <div class="float-layer" id="floatLayer"></div>

  <div class="top" id="topArea">
    <div class="left">
      <h1 id="titleMain">üéâ Happy Birthday, Sayang! üéâ</h1>
      <p class="lead" id="leadTxt">Nyalakan lagunya dan dengarkan lagunya, baca pesanku perlahan.</p>

      <div class="typing-box" id="typingBox" aria-live="polite">
        <div id="typedText"></div><span id="cursor" class="cursor" aria-hidden="true"></span>
      </div>

      <div class="controls" id="controls">
        <button class="btn pulse" id="openBtn" style="display:none">Buka Kejutan üéÅ</button>
        <button class="mutebtn" id="toggleSound">üîä Matikan Musik</button>
      </div>
    </div>

    <div class="hero-photo" aria-hidden="true">
      <img id="heroImg" src="fotoawal.jpeg" alt="Foto Awal">
    </div>
  </div>

  <!-- Surprise area -->
  <div id="surprise" aria-hidden="true">
    <p class="title" id="surpriseTitle">üíñ Kejutan Untukmu</p>
    <p id="surpriseSub">Foto-foto spesial kita ‚Äî sentuh untuk perbesar.</p>

    <div class="gallery" id="gallery">
      <div class="item"><img src="foto1.jpeg" alt="1"></div>
      <div class="item"><img src="foto2.jpeg" alt="2"></div>
      <div class="item"><img src="foto3.jpeg" alt="3"></div>
      <div class="item"><img src="foto4.jpeg" alt="4"></div>
      <div class="item"><img src="foto5.jpeg" alt="5"></div>
      <div class="item"><img src="foto6.jpeg" alt="6"></div>
      <div class="item"><img src="foto7.jpeg" alt="7"></div>
      <div class="item"><img src="foto8.jpeg" alt="8"></div>
      <div class="item"><img src="foto9.jpeg" alt="9"></div>
      <div class="item"><img src="foto10.jpeg" alt="10"></div>
    </div>

    <div class="wa-wrap" id="waWrap">
      <h3 style="margin-top:12px">Balas ke WhatsApp</h3>
      <input id="fromName" placeholder="Namamu sayangku‚Ä¶" />
      <textarea id="replyText" rows="3" placeholder="Tulis balasanmu..."></textarea>
      <div style="display:flex; gap:10px; justify-content:center">
        <button class="wa-send" id="sendWA">Kirim ke WhatsApp</button>
        <button class="btn" id="closeBtn">Tutup Kejutan</button>
      </div>
    </div>
  </div>
</div>

<!-- audio -->
<audio id="bgAudio" loop preload="auto">
  <source src="lagu.mpeg" type="audio/mpeg" />
</audio>

<!-- confetti lib -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

<script>

// teks panjang (surat cinta) ‚Äî sudah diisi
const longMessage = `Sayangku‚Ä¶
Hari ini adalah hari yang begitu istimewa. Bukan sekadar tanggal di kalender, tapi hari di mana dunia dikaruniai seseorang yang begitu luar biasa‚Äîkamu. Aku ingin kamu tahu, betapa berharganya dirimu bagiku, betapa dalamnya aku bersyukur karena hidupku bersentuhan denganmu.

Aku tak bisa selalu sempurna di matamu. Aku tahu aku kadang menyebalkan, kadang membuatmu marah atau kecewa. Tapi setiap detik yang aku jalani, setiap langkah yang aku ambil, selalu tertuju padamu. Hatiku hanya punya satu tujuan: menjaga kamu, mencintaimu, dan membuatmu merasa dicintai tanpa henti.

Aku ingin kamu mengerti, sayang, bahwa kamu adalah alasan aku bertahan, alasan aku tersenyum meski hari berat, dan alasan aku percaya bahwa cinta itu nyata. Setiap kali aku melihatmu, hatiku dipenuhi rasa hangat yang tak bisa diungkapkan dengan kata-kata. Setiap tawa, setiap senyumanmu, adalah hadiah terindah yang membuat hidupku lengkap.

Hari ini aku ingin berjanji padamu, meski tak sempurna, aku akan selalu berada di sampingmu. Aku ingin menjadi pelabuhan di tengah badaimu, tempatmu bersandar saat lelah, tempatmu merasa aman saat dunia terasa kejam. Aku ingin membuatmu bahagia, bukan hanya hari ini, tapi untuk sisa hidupku.

Selamat ulang tahun, cintaku‚Ä¶ Semoga setiap doa dan harapanmu tercapai, semoga setiap langkahmu dipenuhi cahaya, dan semoga kamu selalu merasakan cinta yang sama dalam hatimu seperti yang aku rasakan untukmu‚Äîlebih dalam dari yang pernah aku bayangkan.

Aku mencintaimu‚Ä¶ lebih dari kata-kata, lebih dari waktu, lebih dari segalanya. Hari ini, esok, dan selamanya, aku akan selalu menyayangimu. Bahkan ketika aku tak mampu mengucapkannya, ketahuilah, hatiku selalu berbisik namamu dalam setiap detak.`;

// typing effect settings
const typingSpeed = 24; // ms per character (sesuaikan)
const pauseOnNewline = 250; // extra pause when newline

const typedEl = document.getElementById('typedText');
const cursor = document.getElementById('cursor');
const openBtn = document.getElementById('openBtn');

function sleep(ms){ return new Promise(res=>setTimeout(res, ms)); }

async function typeMessage(msg){
  typedEl.textContent = '';
  cursor.style.display = 'inline-block';
  for(let i=0;i<msg.length;i++){
    const ch = msg[i];
    typedEl.textContent += ch;
    // small scroll to keep text visible on small screens
    typedEl.parentElement.scrollIntoView({behavior:'smooth', block:'center'});
    // pause a bit longer on newline or punctuation for natural feel
    let delay = typingSpeed;
    if(ch === '\n') delay += pauseOnNewline;
    if(ch === ',' || ch === '‚Äî' || ch === '‚Ä¶' || ch === '.') delay += 60;
    await sleep(delay);
  }
  cursor.style.display = 'none';
  // show Open button when typing finished
  openBtn.style.display = 'inline-block';
  openBtn.classList.add('pulse');
}

// spawn floating icons from start
const icons = ['üíñ','üå∏','üéÇ','üéâ','üíù','‚ú®'];
const floatLayer = document.getElementById('floatLayer');
function spawnFloat(){
  const el = document.createElement('div');
  el.className = 'float';
  el.textContent = icons[Math.floor(Math.random()*icons.length)];
  const size = 14 + Math.random()*26;
  el.style.fontSize = size + 'px';
  el.style.left = Math.random()*95 + 'vw';
  el.style.top = (90 + Math.random()*10) + 'vh';
  el.style.animationDuration = (4 + Math.random()*6) + 's';
  floatLayer.appendChild(el);
  setTimeout(()=> el.remove(), 10000);
}
let floatInterval = setInterval(spawnFloat, 600);

// confetti
const confettiCanvas = document.createElement('canvas');
confettiCanvas.style.position = 'fixed';
confettiCanvas.style.top = 0;
confettiCanvas.style.left = 0;
confettiCanvas.style.width = '100%';
confettiCanvas.style.height = '100%';
confettiCanvas.style.pointerEvents = 'none';
confettiCanvas.style.zIndex = 999;
document.body.appendChild(confettiCanvas);
const confettiInstance = confetti.create(confettiCanvas, { resize: true, useWorker: true });

function doConfetti(){
  const duration = 1400;
  const end = Date.now() + duration;
  (function frame(){
    confettiInstance({ particleCount: 8, spread: 60, startVelocity: 30, origin: { x: Math.random() }});
    if (Date.now() < end) requestAnimationFrame(frame);
  })();
}

// reveal gallery sequential
function revealGallerySequential(){
  const items = Array.from(document.querySelectorAll('.gallery .item'));
  document.querySelector('.gallery').style.display = 'flex';
  items.forEach((it, idx) => {
    setTimeout(()=> { it.classList.add('show'); }, idx * 600);
  });
}

// open surprise flow
openBtn.addEventListener('click', ()=> {
  openBtn.disabled = true;
  clearInterval(floatInterval); // stop floats
  doConfetti();
  // try to play audio
  const bg = document.getElementById('bgAudio');
  bg.play().catch(()=>{/* may be blocked */});
  // show surprise area
  document.getElementById('surprise').style.display = 'block';
  revealGallerySequential();
  // show WA form after images appear
  setTimeout(()=> { document.getElementById('waWrap').style.display = 'block'; document.getElementById('surprise').scrollIntoView({behavior:'smooth'}); }, 2500);
});

// toggle music
const toggleSound = document.getElementById('toggleSound');
const bgAudio = document.getElementById('bgAudio');
bgAudio.volume = 0.35;
bgAudio.play().then(()=> toggleSound.textContent = 'üîä Matikan Musik').catch(()=> toggleSound.textContent = 'üîà Putar Musik');
toggleSound.addEventListener('click', ()=> {
  if(bgAudio.paused){ bgAudio.play().then(()=> toggleSound.textContent = 'üîä Matikan Musik'); }
  else { bgAudio.pause(); toggleSound.textContent = 'üîà Putar Musik'; }
});

// send WA
document.getElementById('sendWA').addEventListener('click', ()=>{
  const nomorWhatsApp = '6285161313632'; 
  const name = document.getElementById('fromName').value || '';
  const msg = document.getElementById('replyText').value || 'Makasih ya sayang ‚ù§Ô∏è';
  const text = name ? `Halo, saya ${name} - ${msg}` : msg;
  if(!nomorWhatsApp || nomorWhatsApp === '6285161313632'){ alert('Silakan edit kode dan masukkan nomor WhatsApp kamu (format internasional: 628...)'); return; }
  window.open(`https://wa.me/628516131363${nomorWhatsApp}?text=${encodeURIComponent(text)}`, '_blank');
});

// close surprise
document.getElementById('closeBtn').addEventListener('click', ()=> {
  document.getElementById('surprise').style.display = 'none';
  document.querySelectorAll('.gallery .item').forEach(it=> it.classList.remove('show'));
  document.getElementById('waWrap').style.display = 'none';
  openBtn.disabled = false;
  floatInterval = setInterval(spawnFloat, 600);
});

// Click image => open full
document.getElementById('gallery').addEventListener('click', (e)=>{
  const img = e.target.closest('img');
  if(img) window.open(img.src, '_blank');
});

// Start typing on load
window.addEventListener('load', ()=> {
  typeMessage(longMessage);
});
</script>
</body>
</html>



